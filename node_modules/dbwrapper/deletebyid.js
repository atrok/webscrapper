var { dbwrapper, couchdb_requests } = require('./index');

var connection_string = {
    dbtype: "couchdb",
    couchdb_host: '192.168.14.91',
    couchdb_port: 5984,
    couchdb_username: 'admin',
    couchdb_pass: 'Genesys#1',
}

var dbname = "genesys_releases";

// get instance of couchdb
var db = dbwrapper.getInstance(
    connection_string
);


var ids=["791ddc9ec99d4868880891bc75c5b3b4",
	"791ddc9ec99d4868880891bc75c5c266",
	"791ddc9ec99d4868880891bc75c5c46c",
	"791ddc9ec99d4868880891bc75c5d0b5",
	"791ddc9ec99d4868880891bc75c5dee5",
	"791ddc9ec99d4868880891bc75c5e49b",
	"791ddc9ec99d4868880891bc75c5edb1",
	"791ddc9ec99d4868880891bc75c5f3e8",
	"791ddc9ec99d4868880891bc75c5f424",
	"791ddc9ec99d4868880891bc75c60136",
	"791ddc9ec99d4868880891bc75c609eb",
	"791ddc9ec99d4868880891bc75c60ec5",
	"791ddc9ec99d4868880891bc75c619b8",
	"791ddc9ec99d4868880891bc75c61ea5",
	"791ddc9ec99d4868880891bc75c62777",
	"791ddc9ec99d4868880891bc75c6290b",
	"791ddc9ec99d4868880891bc75c63303",
	"791ddc9ec99d4868880891bc75c6354a",
	"791ddc9ec99d4868880891bc75c63cc9",
	"791ddc9ec99d4868880891bc75c63f4a"]

var remove=couchdb_requests.remove;
remove.params.dbname=dbname;

var get=couchdb_requests.get;
get.params.dbname=dbname;

var run = async function (dbs) {

    var db=dbs;
    ids.forEach(async id=>{
    try {
        
        
        remove.params.id=id;

        var res = await db.handleRequest(remove);

        console.log(res);
        
    } catch (err) {
        console.log(id+": "+err)
    }
})
}

run(db);
